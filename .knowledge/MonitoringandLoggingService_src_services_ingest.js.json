{"is_source_file": true, "format": "JavaScript", "description": "This file defines service functions for ingesting log and metric data, and for writing audit records. It acts as a module providing an interface to ingest logs and metrics into the system, making calls to external store and audit modules.", "external_files": ["./store", "./audit"], "external_methods": ["logs.push", "metrics.push", "writeAudit"], "published": ["ingestLog", "ingestMetric"], "classes": [], "methods": [{"name": "ingestLog(payload, principal, req)", "description": "Accepts a log object, constructs a record, stores it, writes an audit log, and returns the created record.", "scope": "", "scopeKind": ""}, {"name": "ingestMetric(payload, principal, req)", "description": "Accepts a metric object, constructs a point, stores it, writes an audit log, and returns the created point.", "scope": "", "scopeKind": ""}], "calls": ["logs.push", "metrics.push", "writeAudit"], "search-terms": ["ingestLog", "ingestMetric", "MonitoringandLoggingService", "src/services/ingest.js", "ELK-compatible", "audit", "log", "metric"], "state": 2, "file_id": 17, "knowledge_revision": 35, "git_revision": "", "ctags": [{"_type": "tag", "name": "@timestamp", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    '@timestamp': payload.timestamp,$/", "language": "JavaScript", "kind": "property", "scope": "ingestLog.record", "scopeKind": "class"}, {"_type": "tag", "name": "@timestamp", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    '@timestamp': payload.timestamp,$/", "language": "JavaScript", "kind": "property", "scope": "ingestMetric.point", "scopeKind": "class"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    context: payload.context || {},$/", "language": "JavaScript", "kind": "property", "scope": "ingestLog.record", "scopeKind": "class"}, {"_type": "tag", "name": "ingestLog", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^  ingestLog,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "ingestLog", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^function ingestLog(payload, principal, req) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload, principal, req)"}, {"_type": "tag", "name": "ingestMetric", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^function ingestMetric(payload, principal, req) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload, principal, req)"}, {"_type": "tag", "name": "labels", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    labels: payload.labels || {},$/", "language": "JavaScript", "kind": "property", "scope": "ingestMetric.point", "scopeKind": "class"}, {"_type": "tag", "name": "level", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    level: payload.level,$/", "language": "JavaScript", "kind": "property", "scope": "ingestLog.record", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    message: payload.message,$/", "language": "JavaScript", "kind": "property", "scope": "ingestLog.record", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    name: payload.name,$/", "language": "JavaScript", "kind": "property", "scope": "ingestMetric.point", "scopeKind": "class"}, {"_type": "tag", "name": "point", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^  const point = {$/", "language": "JavaScript", "kind": "class", "scope": "ingestMetric", "scopeKind": "class"}, {"_type": "tag", "name": "receivedAt", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    receivedAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "ingestLog.record", "scopeKind": "class"}, {"_type": "tag", "name": "receivedAt", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    receivedAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "ingestMetric.point", "scopeKind": "class"}, {"_type": "tag", "name": "record", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^  const record = {$/", "language": "JavaScript", "kind": "class", "scope": "ingestLog", "scopeKind": "class"}, {"_type": "tag", "name": "source", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    source: payload.source,$/", "language": "JavaScript", "kind": "property", "scope": "ingestLog.record", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/legacy-cycle-store-system-migration--cycle-store-4890-4601/MonitoringandLoggingService/src/services/ingest.js", "pattern": "/^    value: payload.value,$/", "language": "JavaScript", "kind": "property", "scope": "ingestMetric.point", "scopeKind": "class"}], "hash": "bb1a58ff12703f130d6b824fd6ff7d97", "format-version": 4, "code-base-name": "MonitoringandLoggingService", "filename": "MonitoringandLoggingService/src/services/ingest.js", "fields": [{"name": "'@timestamp': payload.timestamp,", "scope": "ingestLog.record", "scopeKind": "class", "description": "unavailable"}, {"name": "context: payload.context || {},", "scope": "ingestLog.record", "scopeKind": "class", "description": "unavailable"}, {"name": "ingestLog,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "labels: payload.labels || {},", "scope": "ingestMetric.point", "scopeKind": "class", "description": "unavailable"}, {"name": "level: payload.level,", "scope": "ingestLog.record", "scopeKind": "class", "description": "unavailable"}, {"name": "message: payload.message,", "scope": "ingestLog.record", "scopeKind": "class", "description": "unavailable"}, {"name": "name: payload.name,", "scope": "ingestMetric.point", "scopeKind": "class", "description": "unavailable"}, {"name": "receivedAt: new Date().toISOString(),", "scope": "ingestLog.record", "scopeKind": "class", "description": "unavailable"}, {"name": "source: payload.source,", "scope": "ingestLog.record", "scopeKind": "class", "description": "unavailable"}, {"name": "value: payload.value,", "scope": "ingestMetric.point", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"35": ""}]}